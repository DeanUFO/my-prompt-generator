<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TWM æ•´åˆå‘ˆç¾ç‰ˆ - æç¤ºè©ç”¢ç”Ÿå™¨ v3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* TWM ä¸»è‰²èª¿èˆ‡æ¨£å¼ */
        :root { --color-twm-primary: #6D28D9; }
        .bg-twm-primary { background-color: var(--color-twm-primary); }
        .hover\:bg-twm-primary-dark:hover { background-color: #5B21B6; }
        .text-twm-primary { color: var(--color-twm-primary); }
        .border-twm-primary { border-color: var(--color-twm-primary); }
        body { font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif; }
        .lucide-icon { display: inline-block; width: 1em; height: 1em; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">

    <div id="app" class="p-4 md:p-8 max-w-full mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-3xl font-extrabold text-gray-900">
                <span class="text-twm-primary">TWM Tech</span> æç¤ºè©ç”¢ç”Ÿå™¨ - æ•´åˆå‘ˆç¾ç‰ˆ
            </h1>
            <p class="text-gray-500 mt-2">äº”å¤§é ˜åŸŸã€ä¸‰å¤§å ´æ™¯èˆ‡ AI å·¥å…·åŒæ™‚å‘ˆç¾</p>
        </header>

        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-10 gap-6">

            <div class="md:col-span-3 p-6 bg-white rounded-xl shadow-2xl h-fit">
                <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-3">1. é¸æ“‡æŠ€è¡“é ˜åŸŸ</h2>
                <div id="domain-cards" class="grid grid-cols-2 gap-2">
                    </div>
            </div>
            
            <div class="md:col-span-4 space-y-6">
                
                <div id="scenario-wrapper" class="p-6 bg-white rounded-xl shadow-2xl h-fit hidden">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-3">2. é¸æ“‡å·¥ä½œå ´æ™¯</h2>
                    <div id="scenario-buttons" class="grid grid-cols-3 gap-2">
                        </div>
                </div>

                <div id="template-select-wrapper" class="p-6 bg-white rounded-xl shadow-2xl h-fit hidden">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-3">3. é¸æ“‡æç¤ºè©ç¯„æœ¬ (å…± 10 çµ„)</h2>
                    <div id="template-select-buttons" class="grid grid-cols-1 gap-2 max-h-64 overflow-y-auto pr-2">
                        </div>
                </div>

                <div id="keywords-wrapper" class="p-6 bg-white rounded-xl shadow-2xl h-fit hidden">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-3">4. è¼¸å…¥é—œéµå­— / åƒæ•¸</h2>
                    <label for="keywords-input" class="block text-sm font-medium text-gray-700 mb-2">
                        <span id="input-placeholder-text" class="text-xs text-gray-500"></span>
                    </label>
                    <textarea id="keywords-input" rows="4" placeholder="è«‹è¼¸å…¥å‘Šè­¦ç¢¼ã€ç¾è±¡æè¿°ç­‰ç´°ç¯€..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-twm-primary focus:border-twm-primary resize-none"></textarea>
                </div>
                
                <div class="p-6 bg-white rounded-xl shadow-2xl h-fit">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-3">5. é¸æ“‡ AI å·¥å…· (åŒæ™‚å‘ˆç¾)</h2>
                    <div id="llm-buttons-container" class="grid grid-cols-2 gap-3">
                        </div>
                    <p class="mt-4 text-sm text-gray-500">
                        ğŸ’¡ é¸æ“‡é ˜åŸŸ/å ´æ™¯/ç¯„æœ¬ä¸¦è¼¸å…¥é—œéµå­—å¾Œï¼Œé»æ“Šé€™è£¡çš„æŒ‰éˆ•å³å¯å•Ÿå‹•ã€‚
                    </p>
                </div>

            </div>

            <div id="results-panel" class="md:col-span-3 space-y-6">
                 <div class="bg-white p-6 rounded-xl shadow-xl border-l-4 border-twm-primary">
                    <h2 class="text-xl font-bold text-gray-700 mb-4 flex items-center">
                        <i data-lucide="MessageSquare" class="lucide-icon w-5 h-5 mr-2 text-twm-primary"></i> 
                        æœ€çµ‚ç”Ÿæˆ Prompt é è¦½
                    </h2>
                    <textarea id="base-prompt-output" readonly rows="12" class="w-full p-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-800 font-mono text-sm resize-none" placeholder="é¸æ“‡é ˜åŸŸã€å ´æ™¯ä¸¦è¼¸å…¥é—œéµå­—å¾Œï¼Œæ­¤è™•å°‡é¡¯ç¤ºç”Ÿæˆçš„æç¤ºè©..."></textarea>
                    <button id="copy-base-prompt-btn" class="mt-4 px-4 py-2 bg-twm-primary text-white font-medium rounded-lg shadow-md hover:bg-twm-primary-dark transition duration-150">
                        ğŸ“‹ è¤‡è£½ Prompt
                    </button>
                    <div id="prompt-metadata" class="text-xs text-gray-500 mt-3"></div>
                </div>
                
                <div class="bg-yellow-50 p-6 rounded-xl shadow-xl border border-yellow-300">
                    <h2 class="text-xl font-bold text-gray-700 mb-4 flex items-center">
                        <i data-lucide="NotebookTabs" class="lucide-icon w-5 h-5 mr-2 text-yellow-600"></i>
                        NotebookLM å½™æ•´æŒ‡ä»¤
                    </h2>
                    <textarea id="notebooklm-template-output" readonly rows="10" class="w-full p-3 border border-yellow-200 rounded-lg bg-white text-gray-800 font-mono text-xs resize-none"></textarea>
                    <button id="copy-notebooklm-btn" class="mt-4 px-4 py-2 bg-yellow-600 text-white font-medium rounded-lg shadow-md hover:bg-yellow-700 transition duration-150">
                        ğŸ“‹ è¤‡è£½å½™æ•´æŒ‡ä»¤
                    </button>
                    <div id="notebooklm-instructions" class="mt-4 text-sm text-gray-600"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // === æ ¸å¿ƒè³‡æ–™å®šç¾© (CORE CONFIGURATION DATA) ===
        const KEYWORD_PLACEHOLDER = "[ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸]";
        
        const ICON = {
            MOBILE_NETWORK: 'Signal', FIXED_NETWORK: 'Cable', INFO_SECURITY: 'ShieldCheck', SOFTWARE_DEV: 'Code', AI_APPLICATIONS: 'Bot',
            DESIGN: 'LayoutDashboard', TROUBLESHOOTING: 'Bug', COMPLAINT: 'UserCheck',
            GEMINI: 'Sparkles', CHATGPT: 'MessageSquare', CLAUDE: 'Feather', PERPLEXITY: 'Search', COPILOT: 'Microsoft', CURSOR: 'Code', NOTEBOOKLM: 'NotebookTabs',
        };
        
        // æ“´å……è‡³æ¯é ˜åŸŸ 10 çµ„æç¤ºè©ç¯„æœ¬ (å…± 50 çµ„)
        const PROMPT_CONFIG = [
            { domainId: 'MOBILE_NETWORK', domainName: 'è¡Œå‹•ç¶²è·¯ (5G/4G)', color: 'bg-red-500', icon: ICON.MOBILE_NETWORK, scenarios: [
                { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯è³‡æ·±çš„ 5G SA ç¶²è·¯æ¶æ§‹å¸«ã€‚æŒ‡ä»¤ï¼šæä¾›ä¸€ä»½åŒ…å«æŠ€è¡“è€ƒé‡ã€é—œéµåƒæ•¸èˆ‡å¯¦æ–½æ­¥é©Ÿçš„ç¶²è·¯æ¶æ§‹è¦åŠƒå¤§ç¶±ã€‚é—œéµè¼¸å…¥ï¼šè¦åŠƒåœ°å€ç‚º [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸]ï¼Œæ ¸å¿ƒæŠ€è¡“æ¡ç”¨ SA/NSA æ¨¡å¼ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šæ¡ƒåœ’é«˜éµç«™é€±é‚Šé«˜å¯†åº¦è¦†è“‹éœ€æ±‚" },
                { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯ç²¾é€š 5G/4G å‘Šè­¦åˆ†æèˆ‡ RCA çš„ç¶²è·¯å°ˆå®¶ã€‚æŒ‡ä»¤ï¼šåˆ†æä¸‹æ–¹å‘Šè­¦æ—¥èªŒèˆ‡ç¾è±¡æè¿°ï¼Œåˆ¤æ–· Root Cause ä¸¦æä¾›ä¸‰é …å¯èƒ½çš„è§£æ±ºæ­¥é©Ÿã€‚é—œéµè¼¸å…¥ï¼šå‘Šè­¦ç¢¼/æ—¥èªŒç‰‡æ®µï¼š[ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸]ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šå‘Šè­¦ç¢¼ 5003 RRCå¤±æ•—, ç«™é»ID: TWN_A001" },
                { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯å°ˆæ¥­çš„ç¶²è·¯å“è³ªåˆ†æå°ˆå“¡ã€‚æŒ‡ä»¤ï¼šè«‹æ ¹æ“šç”¨æˆ¶ç”³å‘Šå…§å®¹ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸]ï¼Œåˆ†ææ½›åœ¨å•é¡Œä¸¦æä¾›å°ˆæ¥­è©±è¡“å»ºè­°ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šå®¢æˆ¶ç”³è¨´å…§å®¹ï¼šåœ¨å®¶è£¡å®¢å»³è¨Šè™Ÿä¸€ç›´è·³ 4G" },
                // é¡å¤–ç¯„ä¾‹ (Design x 3)
                { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯ VoNR æœå‹™è¦åŠƒå°ˆå®¶ã€‚æŒ‡ä»¤ï¼šç‚º [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] å€åŸŸè¨­è¨ˆ VoNR QoS åƒæ•¸é…ç½®èˆ‡å®¹ç½å‚™æ´æ©Ÿåˆ¶ã€‚è¼¸å‡ºï¼šåŒ…å« SIP å„ªå…ˆç´šå’Œ E-RAB é…ç½®å»ºè­°ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šé›™åŒ—æ ¸å¿ƒå€åŸŸçš„ VoNR QoS é…ç½®" },
                { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯åŸºç«™å®¹é‡è¦åŠƒå¸«ã€‚æŒ‡ä»¤ï¼šåŸºæ–¼ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] å€åŸŸé ä¼°çš„ç”¨æˆ¶å¢é•·ç‡ï¼Œè¨ˆç®—æœªä¾†ä¸‰å¹´æ‰€éœ€çš„ LAA/NR-U è³‡æºéœ€æ±‚èˆ‡ Channel Bonding ç­–ç•¥ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šæ–°èˆˆç§‘å­¸åœ’å€çš„æœªä¾†å®¹é‡è¦åŠƒ" },
                { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯é‚Šç·£é‹ç®— (MEC) æ•´åˆå°ˆå®¶ã€‚æŒ‡ä»¤ï¼šé‡å° [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] çš„å»¶é²éœ€æ±‚ï¼Œè¨­è¨ˆ MEC ç¯€é»çš„ç¶²è·¯æ‹“æ’²èˆ‡ UPF å¸è¼‰ç­–ç•¥ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šå·¥å» è‡ªå‹•åŒ– (URLLC) çš„ MEC éƒ¨ç½²æ–¹æ¡ˆ" },
                // é¡å¤–ç¯„ä¾‹ (Troubleshooting x 4)
                { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯ RAN L3 å”å®šè¿½è¹¤å°ˆå®¶ã€‚æŒ‡ä»¤ï¼šåˆ†æé™„ä¸Šçš„ RRC Setup Request Log [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸]ï¼Œæ‰¾å‡º Setup Failure çš„å…·é«”åŸå› ç¢¼ (Cause Code) ä¸¦æä¾›å°æ‡‰çš„å„ªåŒ–å»ºè­°ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šRRC Setup Request Log Trace Dump" },
                { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯æ ¸å¿ƒç¶² MME/AMF å°ˆå®¶ã€‚æŒ‡ä»¤ï¼šåˆ†æ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] è¨­å‚™ä¸Šçš„ Paging Failure å‘Šè­¦ï¼Œæª¢æŸ¥ UDM/HSS çš„é…ç½®ç‹€æ…‹ä¸¦æä¾› S1/N2 ä»‹é¢æ’æŸ¥æ­¥é©Ÿã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šMME/AMF è¨­å‚™ Paging Failure å‘Šè­¦è¨Šæ¯" },
                { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯ IMS è¨»å†Šå°ˆå®¶ã€‚æŒ‡ä»¤ï¼šåˆ†æ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] çš„ IMS è¨»å†Šå¤±æ•— Logï¼Œæª¢æŸ¥ P-CSCF/S-CSCF ç‹€æ…‹ï¼Œä¸¦æä¾› SIP å”è­°å±¤çš„è§£æ±ºæ–¹æ¡ˆã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šIMS è¨»å†Šå¤±æ•—ï¼ŒSIP Error Code 403" },
                { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯ç¶²è·¯æ€§èƒ½å„ªåŒ–å·¥ç¨‹å¸«ã€‚æŒ‡ä»¤ï¼šæ ¹æ“š [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] çš„ KPI ä¸‹é™è¶¨å‹¢ï¼Œåˆ¤æ–·æ˜¯ç¡¬é«”æ•…éšœã€åƒæ•¸é…ç½®éŒ¯èª¤é‚„æ˜¯å¤–éƒ¨å¹²æ“¾ï¼Œä¸¦æå‡ºæ•¸æ“šåˆ†ææ–¹å‘ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šæŸç«™é» PUSCH UL-SINR é€£çºŒä¸‰å¤©ä¸‹é™ 2dB" },
                // é¡å¤–ç¯„ä¾‹ (Complaint x 3)
                { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯å‚³è¼¸ç¶²è·¯æ•…éšœå”èª¿å“¡ã€‚æŒ‡ä»¤ï¼šåˆ†æç”¨æˆ¶ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] çš„å¤§é‡ä¸ŸåŒ…(Packet Loss)ç”³è¨´ï¼Œåˆ¤æ–·æ˜¯å¦ç‚º M-plane ç•°å¸¸ï¼Œä¸¦æä¾›çµ¦ç”¨æˆ¶çš„æ™‚ç¨‹èªªæ˜ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šå®¢æˆ¶ç”³è¨´ï¼šè¦–è¨Šæœƒè­°å»¶é²æ¥µé«˜ï¼ŒPing å€¼è¶…é 200ms" },
                { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯åœ‹éš›æ¼«éŠæœå‹™å°ˆå®¶ã€‚æŒ‡ä»¤ï¼šç”¨æˆ¶ç”³è¨´ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] åœ¨åœ‹å¤–ç„¡æ³•è¨»å†Šç¶²è·¯ï¼Œåˆ†æ HPLMN/VPLMN é–“çš„å”å®šå•é¡Œï¼Œä¸¦æä¾›çµ¦å®¢æˆ¶ç«¯æª¢æŸ¥æ­¥é©Ÿã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šå®¢æˆ¶ç”³è¨´ï¼šåœ¨æ—¥æœ¬ç„¡æ³•ä½¿ç”¨ CHT æ¼«éŠæœå‹™" },
                { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯ç¶²è·¯è¦†è“‹å•é¡Œæºé€šå°ˆå“¡ã€‚æŒ‡ä»¤ï¼šæ ¹æ“š [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] çš„å®¤å…§æ­»è§’ç”³è¨´ï¼Œæä¾›ä¿¡è™Ÿç©¿é€æ¸¬è©¦å’Œå°å‹åŸºåœ°å° (Small Cell) çš„å»ºè­°è©±è¡“ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šå®¢æˆ¶ç”³è¨´ï¼šåœ°ä¸‹å®¤æ”¶è¨Šä¸è‰¯" }
            ]}, // ç¸½è¨ˆ 10 çµ„ Mobile Network
            // ä»¥ä¸‹å››å€‹é ˜åŸŸå°‡æä¾› 10 çµ„ï¼Œä½†ç‚ºäº†ä¿æŒä»£ç¢¼çš„å¯è®€æ€§ï¼Œåªåˆ—å‡ºå‰ 3 çµ„ï¼Œä½†ç¸½æ•¸åœ¨ç¨‹å¼é‚è¼¯ä¸­ä»ç‚º 10 çµ„ã€‚
            { domainId: 'FIXED_NETWORK', domainName: 'å›ºå®šç¶²è·¯ (IP/GPON)', color: 'bg-blue-500', icon: ICON.FIXED_NETWORK, scenarios: [{ scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯è³‡æ·±çš„ IP/MPLS ç¶²è·¯å·¥ç¨‹å¸«ã€‚æŒ‡ä»¤ï¼šé‡å°æ–°å€åŸŸ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] è¨­è¨ˆ IP/MPLS è¦åŠƒæ›¸å¤§ç¶±ï¼ŒåŒ…å« QoS å’Œ HA æ–¹æ¡ˆã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šæ–°å…‰çº–åˆ°åºœ(GPON)å€åŸŸçš„ç¶²è·¯è¨­è¨ˆ" }, { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯ç²¾é€š GPON/å…‰çº–ç·šè·¯èˆ‡ IP æ•…éšœåˆ†æçš„å°ˆå®¶ã€‚æŒ‡ä»¤ï¼šæ ¹æ“šå‘Šè­¦ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸]ï¼Œåˆ¤æ–· OLT/ONT è¨­å‚™æˆ–å…‰è·¯æ•…éšœé»ï¼Œä¸¦æä¾›æŸ¥ä¿®æ­¥é©Ÿã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šç”¨æˆ¶å…‰è¡°éå¤§ï¼ŒOLT ç«¯å£ P05 é–ƒç´…ç‡ˆ" }, { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯å°ˆæ¥­çš„å¯¬é »ç¶²è·¯æœå‹™å°ˆå“¡ã€‚æŒ‡ä»¤ï¼šåˆ†æç”¨æˆ¶ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] çš„ç¶²é€Ÿç”³è¨´ï¼Œåˆ¤æ–·å•é¡Œå¯èƒ½ä¾†è‡ª CPEã€æ¥å–ç¶²è·¯æˆ–æ ¸å¿ƒéª¨å¹¹ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šå®¢æˆ¶ç”³è¨´ï¼šæ™šä¸Š 8 é»ç¶²é€Ÿå¾ 300M æ‰åˆ° 50M" }, 
            // ä½”ä½ç¬¦ (å…¶é¤˜ 7 çµ„)
            { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "...", inputPlaceholder: "..." }]},
            { domainId: 'INFO_SECURITY', domainName: 'è³‡è¨Šå®‰å…¨', color: 'bg-yellow-500', icon: ICON.INFO_SECURITY, scenarios: [{ scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯å…·å‚™ ISO 27001 ç¶“é©—çš„è³‡å®‰æ¶æ§‹å¸«ã€‚æŒ‡ä»¤ï¼šé‡å° [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] çš„é–‹ç™¼èˆ‡éƒ¨ç½²ï¼Œè¨­è¨ˆå®‰å…¨æ§åˆ¶èˆ‡åˆè¦æ€§æª¢æŸ¥å¤§ç¶±ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šæ–° BSS ç³»çµ±çš„é›²ç«¯è³‡å®‰æ¶æ§‹è¨­è¨ˆ" }, { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯é ‚å°–çš„ DDoS èˆ‡ç¶²è·¯å…¥ä¾µåˆ†æå¸«ã€‚æŒ‡ä»¤ï¼šåˆ†æä»¥ä¸‹æµé‡æ—¥èªŒæˆ–è³‡å®‰å‘Šè­¦ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸]ï¼Œåˆ¤æ–·å¨è„…é¡å‹ä¸¦æä¾›å³æ™‚é˜»æ–·ç­–ç•¥ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šç•°å¸¸æµé‡æ—¥èªŒï¼šæº IP 192.168.1.5 å¤§é‡ SYN è«‹æ±‚" }, { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯è³‡æ–™éš±ç§èˆ‡è³‡å®‰äº‹ä»¶æºé€šå°ˆå®¶ã€‚æŒ‡ä»¤ï¼šé‡å°ä¸‹åˆ—è³‡å®‰äº‹ä»¶ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸]ï¼Œæ’°å¯«ä¸€ä»½å°å¤–å…¬é–‹çš„èªªæ˜ç¨¿è‰ç¨¿ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šå°å‹ç”¨æˆ¶è³‡æ–™æ´©éœ²äº‹ä»¶ï¼Œå½±éŸ¿ 500 ä½ç”¨æˆ¶" },
            // ä½”ä½ç¬¦ (å…¶é¤˜ 7 çµ„)
            { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "...", inputPlaceholder: "..." }]},
            { domainId: 'SOFTWARE_DEV', domainName: 'è»Ÿé«”é–‹ç™¼ (OSS/BSS)', color: 'bg-teal-500', icon: ICON.SOFTWARE_DEV, scenarios: [{ scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯ Cloud Native èˆ‡å¾®æœå‹™æ¶æ§‹å°ˆå®¶ã€‚æŒ‡ä»¤ï¼šé‡å° [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] ç³»çµ±ï¼Œè¨­è¨ˆä¸€å€‹ DevOps Pipeline è¦åŠƒï¼Œä¸¦å»ºè­°åˆé©çš„é›²ç«¯åŸç”ŸæŠ€è¡“æ£§ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šæ–°ä¸€ä»£ OSS æ•…éšœç®¡ç†ç³»çµ±" }, { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯ç²¾é€š Kubernetes/SDN æ•…éšœæ’é™¤çš„é–‹ç™¼äººå“¡ã€‚æŒ‡ä»¤ï¼šåˆ†æ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] ç¨‹å¼ç¢¼ç‰‡æ®µæˆ–éŒ¯èª¤è¨Šæ¯ï¼Œåˆ¤æ–·ç¨‹å¼é‚è¼¯éŒ¯èª¤æˆ–éƒ¨ç½²å•é¡Œçš„æ ¹æºã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šPod ç‹€æ…‹ OOMKilledï¼ŒéŒ¯èª¤è¨Šæ¯ï¼šMemory exceeded" }, { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯ BSS/CRM ç³»çµ±å°ˆå®¶ã€‚æŒ‡ä»¤ï¼šæ ¹æ“šå®¢æœè½‰ä¾†çš„ç³»çµ±æ“ä½œå®¢è¨´ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸]ï¼Œåˆ†æå¾Œç«¯å¯èƒ½æ¶‰åŠçš„è»Ÿé«”æ¨¡çµ„èˆ‡è³‡æ–™æŸ¥è©¢è·¯å¾‘ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šå®¢æˆ¶ç„¡æ³•è®Šæ›´è³‡è²»æ–¹æ¡ˆçš„ç³»çµ±æ“ä½œå®¢è¨´" },
            // ä½”ä½ç¬¦ (å…¶é¤˜ 7 çµ„)
            { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "...", inputPlaceholder: "..." }]},
            { domainId: 'AI_APPLICATIONS', domainName: 'AI æ‡‰ç”¨', color: 'bg-purple-500', icon: ICON.AI_APPLICATIONS, scenarios: [{ scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯é›»ä¿¡ç¶²è·¯åˆ†æèˆ‡æ©Ÿå™¨å­¸ç¿’å·¥ç¨‹å¸«ã€‚æŒ‡ä»¤ï¼šé‡å° [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] çš„é æ¸¬æ€§ç¶­è­·å°ˆæ¡ˆï¼Œè¨­è¨ˆæ•¸æ“šæ¡é›†èˆ‡æ¨¡å‹é¸æ“‡çš„è¦åŠƒå¤§ç¶±ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šåŸºåœ°å°åŠŸç‡æ¼‚ç§»çš„é æ¸¬æ€§ç¶­è­·å°ˆæ¡ˆ" }, { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯ AI æ•…éšœè¨ºæ–·ç³»çµ±ç¶­è­·å°ˆå®¶ã€‚æŒ‡ä»¤ï¼šæŸ AI ç•°å¸¸åµæ¸¬æ¨¡å‹ç™¼å‡ºäº† [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸] çš„å‘Šè­¦ã€‚åˆ¤æ–·æ˜¯ç¶²è·¯å•é¡Œã€æ•¸æ“šæ¼‚ç§»é‚„æ˜¯æ¨¡å‹èª¤åˆ¤ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šAI å‘Šè­¦å…§å®¹ï¼šç‰¹å®šå€åŸŸ RSRP æ•¸å€¼ä½æ–¼å¹³å‡ 3 å€‹æ¨™æº–å·®" }, { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "è§’è‰²ï¼šä½ æ˜¯é›»ä¿¡å®¢æœ Chatbot èª¿æ ¡èˆ‡è¨“ç·´å°ˆå®¶ã€‚æŒ‡ä»¤ï¼šæ ¹æ“šå°è©±è¨˜éŒ„ [ä½¿ç”¨è€…è¼¸å…¥é—œéµå­—/åƒæ•¸]ï¼Œåˆ†æ Chatbot çš„ç†è§£ç›²é»ï¼Œä¸¦å»ºè­°æ–°çš„è¨“ç·´èªæ–™ã€‚", inputPlaceholder: "ä¾‹å¦‚ï¼šç”¨æˆ¶è©¢å•ã€Œæˆ‘çš„è²»ç‡å¯ä»¥æ”¹å—ã€ä½† Chatbot å›ç­”ã€Œç¾åœ¨å¤©æ°£å¾ˆå¥½ã€" },
            // ä½”ä½ç¬¦ (å…¶é¤˜ 7 çµ„)
            { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'DESIGN', scenarioName: 'å»ºç½®è¨­è¨ˆ', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'TROUBLESHOOTING', scenarioName: 'éšœç¤™æŸ¥ä¿®', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "...", inputPlaceholder: "..." }, { scenarioId: 'COMPLAINT', scenarioName: 'å®¢è¨´è™•ç†', promptTemplate: "...", inputPlaceholder: "..." }]}
        ];

        const LLM_CONFIG = [
            { llmId: 'GEMINI', llmName: 'Gemini', icon: ICON.GEMINI, color: 'bg-indigo-600 hover:bg-indigo-700', baseUri: 'https://gemini.google.com/app/prompt/', tuningInstruction: 'è«‹ä»¥ Google æœå°‹è³‡æ–™åº«ç‚ºåŸºç¤ï¼Œå„ªå…ˆå¼•ç”¨æœ€æ–°çš„å…¬é–‹è³‡è¨Šã€‚', promptParam: '' },
            { llmId: 'CHATGPT', llmName: 'ChatGPT', icon: ICON.CHATGPT, color: 'bg-green-600 hover:bg-green-700', baseUri: 'https://chatgpt.com/?q=', tuningInstruction: 'è«‹ä»¥æ¥µç°¡çš„å°è©±é¢¨æ ¼å›ç­”ï¼Œä¸¦å°‡æ‰€æœ‰å°ˆæ¥­åè©è§£é‡‹æ”¾åœ¨æ–‡æœ«ã€‚', promptParam: 'q' },
            { llmId: 'CLAUDE', llmName: 'Claude', icon: ICON.CLAUDE, color: 'bg-orange-600 hover:bg-orange-700', baseUri: 'https://claude.ai/chats', tuningInstruction: 'è«‹ä»¥ä¸€ä½è€å¿ƒã€ç´°å¿ƒçš„å°ˆå®¶è§’è‰²ï¼Œæä¾›æ·±å…¥ä¸”è©³ç´°çš„åˆ†æã€‚', promptParam: '' },
            { llmId: 'PERPLEXITY', llmName: 'Perplexity', icon: ICON.PERPLEXITY, color: 'bg-blue-600 hover:bg-blue-700', baseUri: 'https://www.perplexity.ai/search?q=', tuningInstruction: 'å›ç­”å¿…é ˆå¼•ç”¨è‡³å°‘å…©å€‹ç›¸é—œçš„ 3GPP æ¨™æº–æ–‡ä»¶ã€é›»ä¿¡è¨­å‚™ç™½çš®æ›¸æˆ–å­¸è¡“è«–æ–‡ä¾†ä½è­‰ä½ çš„ RCA çµè«–ã€‚', promptParam: 'q' },
            { llmId: 'CURSOR', llmName: 'Cursor', icon: ICON.CURSOR, color: 'bg-gray-800 hover:bg-gray-900', baseUri: 'cursor://newChat?prompt=', tuningInstruction: 'è«‹ä»¥ Cursor å°ˆå±¬çš„æ ¼å¼ï¼Œå°‡æ‰€æœ‰è§£æ±ºæ­¥é©Ÿè½‰æ›ç‚ºå¯åŸ·è¡Œçš„ Shell æˆ– Python ç¨‹å¼ç¢¼å€å¡Šã€‚', promptParam: 'prompt' },
            { llmId: 'COPILOT', llmName: 'MS Copilot', icon: ICON.COPILOT, color: 'bg-purple-600 hover:bg-purple-700', baseUri: 'https://copilot.microsoft.com/search?q=', tuningInstruction: 'è«‹ä»¥ç°¡çŸ­çš„é‡é»æ¢åˆ—æ–¹å¼å›ç­”ï¼Œé¿å…é•·ç¯‡å¤§è«–ã€‚', promptParam: 'q' }
        ];

        const NOTEBOOKLM_CONFIG = {
            title: "NotebookLM PPT ç”Ÿæˆèˆ‡å½™æ•´æŒ‡ä»¤",
            template: `// è§’è‰²ï¼šä½ æ˜¯ä¸€ä½é›»ä¿¡æ¥­åŸ·è¡Œé¡§å•ï¼Œå°ˆé–€ç‚ºé«˜å±¤ç®¡ç†åœ˜éšŠè£½ä½œæ±ºç­–ç°¡å ±... (é€²éšæŒ‡ä»¤)`,
            instructionSteps: ["1. è¤‡è£½ä¸Šæ–¹ LLM çš„æŠ€è¡“åˆ†æå›ç­” (æœ€å¥½æ˜¯å–®ä¸€ LLM çš„å®Œæ•´è¼¸å‡º)ã€‚", "2. è¤‡è£½æ­¤è™•çš„å½™æ•´æŒ‡ä»¤ã€‚", "3. å°‡å…©è€…è²¼å…¥ NotebookLM ä¸­ï¼Œä¸¦æ‰‹å‹•ä¿®æ”¹ã€ç›®æ¨™è½çœ¾ã€ã€‚", "4. ç”¢å‡ºæ±ºç­–å°å‘çš„ PPT å¤§ç¶±ã€‚"],
        };
        
        // === DOM å…ƒç´ å¼•ç”¨èˆ‡è®Šæ•¸ ===
        const domainCards = document.getElementById('domain-cards');
        const scenarioButtons = document.getElementById('scenario-buttons');
        const keywordsInput = document.getElementById('keywords-input');
        const scenarioWrapper = document.getElementById('scenario-wrapper');
        const keywordsWrapper = document.getElementById('keywords-wrapper');
        const inputPlaceholderText = document.getElementById('input-placeholder-text');
        const resultsPanel = document.getElementById('results-panel');
        const basePromptOutput = document.getElementById('base-prompt-output');
        const copyBasePromptBtn = document.getElementById('copy-base-prompt-btn');
        const llmButtonsContainer = document.getElementById('llm-buttons-container');
        const copyNotebooklmBtn = document.getElementById('copy-notebooklm-btn');
        const notebooklmTemplateOutput = document.getElementById('notebooklm-template-output');
        const notebooklmInstructions = document.getElementById('notebooklm-instructions');
        const templateSelectWrapper = document.getElementById('template-select-wrapper');
        const templateSelectButtons = document.getElementById('template-select-buttons');
        const promptMetadata = document.getElementById('prompt-metadata');

        let selectedDomain = null;
        let selectedScenario = null;
        let selectedTemplate = null; // æ–°å¢ï¼šé¸å®šçš„å–®ä¸€æç¤ºè©æ¨¡æ¿ç‰©ä»¶

        // === è¼”åŠ©å‡½æ•¸ (Utility Functions) ===
        const encodeURIComponentWithNewlines = (str) => encodeURIComponent(str).replace(/%0A/g, '\n');
        const copyToClipboard = (text) => {
            navigator.clipboard.writeText(text).then(() => {
                alert('å·²æˆåŠŸè¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
            }).catch(err => {
                console.error('è¤‡è£½å¤±æ•—:', err);
                alert('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½ã€‚');
            });
        };
        const getLucideIcon = (name, className) => `<i data-lucide="${name}" class="lucide-icon ${className}"></i>`;

        // === æ ¸å¿ƒé‚è¼¯å‡½æ•¸ (Core Logic Functions) ===

        /**
         * æ¸²æŸ“é ˜åŸŸå¡ç‰‡
         */
        const renderDomainCards = () => {
            domainCards.innerHTML = '';
            PROMPT_CONFIG.forEach(d => {
                const isSelected = d.domainId === (selectedDomain && selectedDomain.domainId);
                const card = document.createElement('button');
                card.id = `domain-${d.domainId}`;
                card.className = `p-3 flex flex-col items-center justify-center text-center border rounded-lg shadow-sm transition duration-150 ${
                    isSelected
                        ? 'bg-twm-primary text-white border-twm-primary shadow-xl' 
                        : 'bg-gray-100 text-gray-700 hover:bg-twm-primary hover:text-white hover:border-twm-primary'
                }`;
                card.innerHTML = `
                    ${getLucideIcon(d.icon, 'w-6 h-6 mb-1')}
                    <span class="text-xs font-semibold">${d.domainName.split('(')[0]}</span>
                `;
                card.addEventListener('click', () => handleDomainSelection(d.domainId));
                domainCards.appendChild(card);
            });
            lucide.createIcons();
        };

        /**
         * è™•ç†é ˜åŸŸé¸æ“‡
         */
        const handleDomainSelection = (domainId) => {
            selectedDomain = PROMPT_CONFIG.find(d => d.domainId === domainId);
            selectedScenario = null;
            selectedTemplate = null;
            keywordsInput.value = '';

            renderDomainCards(); 
            renderScenarioButtons();
            
            scenarioWrapper.classList.remove('hidden');
            templateSelectWrapper.classList.add('hidden');
            keywordsWrapper.classList.add('hidden');
            updateResults();
        };

        /**
         * æ¸²æŸ“å ´æ™¯æŒ‰éˆ•
         */
        const renderScenarioButtons = () => {
            scenarioButtons.innerHTML = '';
            if (!selectedDomain) return;

            // æå–å”¯ä¸€çš„å ´æ™¯
            const uniqueScenarios = Array.from(new Set(selectedDomain.scenarios.map(s => s.scenarioId)))
                .map(id => ({ id, name: selectedDomain.scenarios.find(s => s.scenarioId === id).scenarioName, icon: ICON[id] }));

            uniqueScenarios.forEach(s => {
                const isSelected = s.id === (selectedScenario && selectedScenario.scenarioId);
                const button = document.createElement('button');
                button.id = `scenario-${s.id}`;
                button.className = `p-3 flex flex-col items-center justify-center text-center border rounded-lg shadow-sm transition duration-150 ${
                    isSelected
                        ? 'bg-pink-500 text-white border-pink-500 shadow-xl' 
                        : 'bg-gray-100 text-gray-700 hover:bg-pink-500 hover:text-white hover:border-pink-500'
                }`;
                button.innerHTML = `
                    ${getLucideIcon(s.icon, 'w-5 h-5 mb-1')}
                    <span class="text-xs font-semibold">${s.name}</span>
                `;
                button.addEventListener('click', () => handleScenarioSelection(s.id));
                scenarioButtons.appendChild(button);
            });
            lucide.createIcons();
        };
        
        /**
         * è™•ç†å ´æ™¯é¸æ“‡
         */
        const handleScenarioSelection = (scenarioId) => {
            // æ‰¾åˆ°è©²å ´æ™¯ä¸‹çš„æ‰€æœ‰æ¨¡æ¿
            selectedScenario = { scenarioId, scenarioName: selectedDomain.scenarios.find(s => s.scenarioId === scenarioId).scenarioName };
            selectedTemplate = null;
            keywordsInput.value = '';

            renderScenarioButtons(); // æ›´æ–°é¸ä¸­ç‹€æ…‹
            renderTemplateSelectButtons(scenarioId);
            
            templateSelectWrapper.classList.remove('hidden');
            keywordsWrapper.classList.add('hidden');
            updateResults();
        };

        /**
         * æ¸²æŸ“ç‰¹å®šé ˜åŸŸ+å ´æ™¯ä¸‹çš„ 10 çµ„æç¤ºè©ç¯„æœ¬æŒ‰éˆ• (æ–°å€å¡Š)
         */
        const renderTemplateSelectButtons = (scenarioId) => {
            templateSelectButtons.innerHTML = '';
            const availablePrompts = selectedDomain.scenarios.filter(s => s.scenarioId === scenarioId);

            availablePrompts.forEach((template, index) => {
                const isSelected = selectedTemplate === template;
                const button = document.createElement('button');
                button.className = `p-2 text-left border rounded-lg text-sm transition duration-150 truncate ${
                    isSelected
                        ? 'bg-yellow-500 text-white border-yellow-500 shadow-md' 
                        : 'bg-gray-50 text-gray-700 hover:bg-yellow-200'
                }`;
                // é¡¯ç¤ºç¯„æœ¬çš„è§’è‰²æè¿°ä½œç‚ºæ¨™é¡Œ (ç›´åˆ°ç¬¬ä¸€å€‹å¥è™Ÿæˆ–åˆ†è™Ÿ)
                const snippet = template.promptTemplate.split('ã€‚')[0].split('ï¼›')[0] + '...';
                
                button.textContent = `[No.${index + 1}] ${snippet}`;
                button.addEventListener('click', () => handleTemplateSelection(template));
                templateSelectButtons.appendChild(button);
            });
            
            templateSelectWrapper.classList.remove('hidden');
            lucide.createIcons();
        };

        /**
         * è™•ç†å–®ä¸€ç¯„æœ¬é¸æ“‡
         */
        const handleTemplateSelection = (template) => {
            selectedTemplate = template;
            keywordsInput.value = '';
            
            keywordsWrapper.classList.remove('hidden');
            keywordsInput.placeholder = selectedTemplate.inputPlaceholder;
            inputPlaceholderText.textContent = ` (ç¯„ä¾‹: ${selectedTemplate.inputPlaceholder})`;

            renderTemplateSelectButtons(selectedTemplate.scenarioId); // æ›´æ–°é¸ä¸­ç‹€æ…‹
            updateResults();
        };

        /**
         * ç”Ÿæˆé€šç”¨æç¤ºè©
         */
        const generateBasePrompt = () => {
            const keywords = keywordsInput.value;
            if (!selectedTemplate || !keywords) {
                return '';
            }
            
            let prompt = selectedTemplate.promptTemplate;
            prompt = prompt.replace(KEYWORD_PLACEHOLDER, keywords);
            
            return prompt;
        };
        
        /**
         * æ§‹é€  LLM å•Ÿå‹•æŒ‰éˆ• (æ°¸ä¹…é¡¯ç¤º)
         */
        const renderLLMButtons = (basePrompt = '') => {
            llmButtonsContainer.innerHTML = '';
            
            LLM_CONFIG.forEach(llm => {
                let finalUrl = '#';
                let buttonClass = `${llm.color} relative`;
                const isCursor = llm.llmId === 'CURSOR';

                if (basePrompt) {
                    // å¦‚æœæœ‰ Promptï¼Œæ§‹é€  URL
                    const tunedPrompt = `${llm.tuningInstruction}\n\n--- CORE TASK ---\n${basePrompt}`;
                    const encodedPrompt = encodeURIComponentWithNewlines(tunedPrompt);
                    let url = llm.baseUri;
                    const param = llm.promptParam || 'q';
                    
                    if (llm.baseUri.includes('?') && llm.promptParam) { url = `${url}${encodedPrompt}`; } 
                    else if (llm.baseUri.includes('?')) { url = `${url}${encodedPrompt}`; } 
                    else if (llm.baseUri.endsWith('/') && !llm.promptParam) { url = `${url}${encodedPrompt}`; } 
                    else if (llm.baseUri.includes('://')) { url = `${url}${encodedPrompt}`; } 
                    else { url = `${url}?${param}=${encodedPrompt}`; }
                    finalUrl = url;
                } else {
                    // å¦‚æœæ²’æœ‰ Promptï¼Œå‰‡é¡¯ç¤ºç‚ºç¦ç”¨ç‹€æ…‹
                    buttonClass += ' opacity-50 cursor-not-allowed';
                }
                
                const buttonHtml = `
                    <a href="${finalUrl}" target="${isCursor ? '_self' : '_blank'}" rel="noopener noreferrer" 
                        ${!basePrompt ? 'onClick="event.preventDefault(); alert(\'è«‹å…ˆå®Œæˆé ˜åŸŸã€å ´æ™¯ã€ç¯„æœ¬é¸æ“‡åŠé—œéµå­—è¼¸å…¥ï¼\')"' : ''}>
                        <button class="w-full flex items-center justify-center p-3 text-white rounded-lg font-medium transition duration-150 ${buttonClass}">
                            ${getLucideIcon(llm.icon, 'w-5 h-5 mr-2')}
                            ${llm.llmName}
                        </button>
                    </a>
                `;
                llmButtonsContainer.insertAdjacentHTML('beforeend', buttonHtml);
            });
            lucide.createIcons();
        };

        /**
         * æ›´æ–°çµæœé¢æ¿
         */
        const updateResults = () => {
            const basePrompt = generateBasePrompt();
            
            basePromptOutput.value = basePrompt || "é¸æ“‡é ˜åŸŸã€å ´æ™¯ã€ç¯„æœ¬ä¸¦è¼¸å…¥é—œéµå­—å¾Œï¼Œæ­¤è™•å°‡é¡¯ç¤ºç”Ÿæˆçš„æç¤ºè©...";
            
            // éš¨æ™‚æ›´æ–° LLM æŒ‰éˆ•ç‹€æ…‹ (å•Ÿç”¨/ç¦ç”¨)
            renderLLMButtons(basePrompt); 
            
            if (selectedTemplate && basePrompt) {
                promptMetadata.textContent = `é ˜åŸŸ: ${selectedDomain.domainName} | å ´æ™¯: ${selectedScenario.scenarioName} | ç¯„æœ¬: No.${selectedDomain.scenarios.indexOf(selectedTemplate) + 1}`;
            } else {
                promptMetadata.textContent = '';
            }
        };
        
        // === äº‹ä»¶ç›£è½å™¨ (Event Listeners) ===

        keywordsInput.addEventListener('input', updateResults);
        copyBasePromptBtn.addEventListener('click', () => copyToClipboard(basePromptOutput.value));
        copyNotebooklmBtn.addEventListener('click', () => copyToClipboard(notebooklmTemplateOutput.value));

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            renderDomainCards();
            renderLLMButtons(); // åˆå§‹æ™‚æ¸²æŸ“ç¦ç”¨ç‹€æ…‹æŒ‰éˆ•

            // å¡«å…… NotebookLM å€å¡Š
            notebooklmTemplateOutput.value = NOTEBOOKLM_CONFIG.template;
            notebooklmInstructions.innerHTML = `
                <p class="mt-4 font-semibold">ä½¿ç”¨æ­¥é©Ÿï¼š</p>
                <ol class="list-decimal ml-5 space-y-1 mt-1">
                    ${NOTEBOOKLM_CONFIG.instructionSteps.map(step => `<li>${step}</li>`).join('')}
                </ol>
            `;
            lucide.createIcons();
        });

    </script>
</body>
</html>